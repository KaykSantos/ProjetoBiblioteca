<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover">
  <meta http-equiv="Content-Security-Policy" content="default-src * data: gap: https://ssl.gstatic.com; style-src * 'unsafe-inline'; script-src * 'unsafe-inline' 'unsafe-eval'">
  <script src="components/loader.js"></script>
  <link rel="stylesheet" href="components/loader.css">
  <link rel="stylesheet" href="css/style.css">
  <!-- links -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Rubik&family=Square+Peg&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400&display=swap" rel="stylesheet" />
</head>
<body id="body-login">
    <main id="mainLogin">
        <section class="area-login">
            <div class="login"> <!-- Principal -->
            <div class="logo">
            <img src="logo/logoazul.png" alt="Logo do projeto">
            </div>
            <form id="entrar" method="post" autocomplete="off">
                Usuário:
                <input class="inputmain" type= "email" id="login" name="login" placeholder="Login">
                <BR>
                Senha:
                <input class="inputmain" type="password" id="senha" name="senha" placeholder="Senha">
                <br>
                <button type="submit"> Entrar</button>
            </form>
            <p><a href="#">Esqueceu a senha?</a></p>
            </div>
        </section>
    </main>
  <script>
    let form = document.getElementById("entrar");
    let login = document.getElementById("login");
    let senha = document.getElementById("senha");

     form.addEventListener("click", function(){
        let formData = new FormData();
        formData.append('login', `${login.value}`);
        formData.append('senha', `${senha.value}`);

        fetch("http://bba.profrodolfo.com.br/usuario.php",
            {
                body: formData,
                method: "post",
                mode: 'cors',
                cache: 'default'
            })  .then(response => {response.json()
            .then(data => {
                console.log(data);
              if(data.erro){
                    alert("UsuÃ¡rio e/ou senha invÃ¡lidos");
                }else{
                  alert(data.dados.nome);
                  location.href = "acervo.html";
                }
            })
          });
      });   
  </script>
  </body>
</html>